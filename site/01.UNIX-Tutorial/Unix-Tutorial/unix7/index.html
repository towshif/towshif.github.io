<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>7. UNIX Tutorial Seven - Less-Than-10 Tutorials (<10)</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "7. UNIX Tutorial Seven";
    var mkdocs_page_input_path = "01.UNIX-Tutorial/Unix-Tutorial/unix7.md";
    var mkdocs_page_url = "/01.UNIX-Tutorial/Unix-Tutorial/unix7/";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> Less-Than-10 Tutorials (<10)</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../../..">Instructions</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../gettingStarted/">Getting Started</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">00.Remote Access</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../00.Remote-Access/scp/">scp - Secure Copy in 10 mins</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../00.Remote-Access/ssh/">ssh - Secure Shell in 10 mins</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">01.UNIX Tutorial</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../shell/">UNIX Shell in 10 mins</a>
                </li>
                <li class="">
                    
    <a class="" href="../../unix-cheat-sheet/">UNIX Shell Cheat Sheet</a>
                </li>
                <li class=" current">
                    
    <span class="caption-text">Unix Tutorial</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../">Contents: UNIX Tutorial for Beginners</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../introunix/">Introduction to UNIX</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../unix0/">UNIX Tutorial</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../unix1/">1. UNIX Tutorial One</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../unix2/">2. UNIX Tutorial Two</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../unix3/">3. UNIX Tutorial Three</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../unix4/">4. UNIX Tutorial Four</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../unix5/">5. UNIX Tutorial Five</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../unix6/">6. UNIX Tutorial Six</a>
                </li>
                <li class="toctree-l3 current">
                    
    <a class="current" href="./">7. UNIX Tutorial Seven</a>
    <ul class="subnav">
            
    <li class="toctree-l4"><a href="#7-unix-tutorial-seven">7. UNIX Tutorial Seven</a></li>
    
        <ul>
        
            <li><a class="toctree-l5" href="#71-compiling-unix-software-packages">7.1 Compiling UNIX software packages</a></li>
        
            <li><a class="toctree-l5" href="#72-downloading-source-code">7.2 Downloading source code</a></li>
        
            <li><a class="toctree-l5" href="#73-extracting-the-source-code">7.3 Extracting the source code</a></li>
        
            <li><a class="toctree-l5" href="#74-configuring-and-creating-the-makefile">7.4 Configuring and creating the Makefile</a></li>
        
            <li><a class="toctree-l5" href="#75-building-the-package">7.5 Building the package</a></li>
        
            <li><a class="toctree-l5" href="#76-running-the-software">7.6 Running the software</a></li>
        
            <li><a class="toctree-l5" href="#77-stripping-unnecessary-code">7.7 Stripping unnecessary code</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../unix8/">8. UNIX Tutorial Eight</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../unix99answer/">7. Answers</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">02.Editors</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../02.Editors/nano/">Getting started with `Nano`</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">03.Web Interaction</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../03.Web-Interaction/Unix-Basic-NetworkAccess/">Basic Networking from shell</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../03.Web-Interaction/Unix-Networking/">More on Networking</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">04.Organizing Reporting</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../04.Organizing-Reporting/github/">Git and Github</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../04.Organizing-Reporting/github_xrzz/">Exercise: Git and Github</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../04.Organizing-Reporting/html/">Creating a Webpage with Github.io</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../04.Organizing-Reporting/html_xrzz/">Exercise: Create a webpage on Github.io</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../04.Organizing-Reporting/linux-google-cloud/">Setting up Google Cloud Console</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../04.Organizing-Reporting/markdown/">Markdown (.md)  in 10 mins</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../04.Organizing-Reporting/publishing-markdown/">Publishing Markdown Documents</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">99.Projects</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../99.Projects/Assignment-01/">Assignment 1: Project</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Others</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../Others/RollingUpdates/">RollingUpdates</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">WorkInProgress</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../WorkInProgress/University-List-Detailed/">US University Ranking 2019 (Detailed List)</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../WorkInProgress/University-List/">Top 200 US University Rankings 2019</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../WorkInProgress/about/">About</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tutorials</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../tutorials/">Getting Started with Tutorials</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../tutorials/Helper/">Insert Multiple Cursors at the Start of Every Line with VSCode</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Intro</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Intro/mkdocs/">Markdown documentation with MkDocs and Themes</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Linux Shell</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Linux Shell/bash-alias/">Bash Pro Tips</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Linux Shell/bash-cheat-sheet/">Bash Script Cheat Sheet</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Linux Shell/benchmark-linux/">Sysbench tool for benchmarking</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Linux Shell/cleanup/">Cleanup</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Linux Shell/nano/">Getting started with `Nano`</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Linux Shell/permissions/">Setting Default permissions for Directory with user groups</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Linux Shell/reference/">References</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Linux Shell/rough/">Rough</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Linux Shell/shell-advanced-1/">Unix Shell Advanced</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Linux Shell/shell/">Unix Shell in 10 mins</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Linux Shell/ssh/">ssh - Secure Shell in 10 mins</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Linux Shell/tmux/">tmux in 10 mins</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Linux Shell/vim/">Vim in 10 mins</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Python</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Python/Todo/">Python For Engineers and Professionals</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Python/python-cheat-sheet/">Newbies</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../tutorials/Python/setup-Jupyter/">How to Setup Jupyter Notebook Server as a daemon service</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">Less-Than-10 Tutorials (<10)</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Unix Tutorial &raquo;</li>
        
      
        
          <li>01.UNIX Tutorial &raquo;</li>
        
      
    
    <li>7. UNIX Tutorial Seven</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="7-unix-tutorial-seven">7. UNIX Tutorial Seven</h1>
<p>===================</p>
<h2 id="71-compiling-unix-software-packages">7.1 Compiling UNIX software packages</h2>
<p>We have many public domain and commercial software packages installed on
our systems, which are available to all users. However, students are
allowed to download and install small software packages in their own
home directory, software usually only useful to them personally.</p>
<p>There are a number of steps needed to install the software.</p>
<ul>
<li>Locate and download the source code (which is usually compressed)</li>
<li>Unpack the source code</li>
<li>Compile the code</li>
<li>Install the resulting executable</li>
<li>Set paths to the installation directory</li>
</ul>
<p>Of the above steps, probably the most difficult is the compilation
stage.</p>
<h3 id="compiling-source-code">Compiling Source Code</h3>
<p>All high-level language code must be converted into a form the computer
understands. For example, C language source code is converted into a
lower-level language called assembly language. The assembly language
code made by the previous stage is then converted into object code which
are fragments of code which the computer understands directly. The final
stage in compiling a program involves linking the object code to code
libraries which contain certain built-in functions. This final stage
produces an executable program.</p>
<p>To do all these steps by hand is complicated and beyond the capability
of the ordinary user. A number of utilities and tools have been
developed for programmers and end-users to simplify these steps.</p>
<h3 id="make-and-the-makefile">make and the Makefile</h3>
<p>The make command allows programmers to manage large programs or groups
of programs. It aids in developing large programs by keeping track of
which portions of the entire program have been changed, compiling only
those parts of the program which have changed since the last compile.</p>
<p>The make program gets its set of compile rules from a text file called
<strong>Makefile</strong> which resides in the same directory as the source files. It
contains information on how to compile the software, e.g. the
optimisation level, whether to include debugging info in the executable.
It also contains information on where to install the finished compiled
binaries (executables), manual pages, data files, dependent library
files, configuration files, etc.</p>
<p>Some packages require you to edit the Makefile by hand to set the final
installation directory and any other parameters. However, many packages
are now being distributed with the GNU configure utility.</p>
<h3 id="configure">configure</h3>
<p>As the number of UNIX variants increased, it became harder to write
programs which could run on all variants. Developers frequently did not
have access to every system, and the characteristics of some systems
changed from version to version. The GNU configure and build system
simplifies the building of programs distributed as source code. All
programs are built using a simple, standardised, two step process. The
program builder need not install any special tools in order to build the
program.</p>
<p>The configure shell script attempts to guess correct values for various
system-dependent variables used during compilation. It uses those values
to create a <strong>Makefile</strong> in each directory of the package.</p>
<p>The simplest way to compile a package is:</p>
<ol>
<li>cd to the directory containing the package's source code.</li>
<li>Type ./configure to configure the package for your system.</li>
<li>Type make to compile the package.</li>
<li>Optionally, type make check to run any self-tests that come with the
    package.</li>
<li>Type make install to install the programs and any data files and
    documentation.</li>
<li>Optionally, type make clean to remove the program binaries and
    object files from the source code directory </li>
</ol>
<p>The configure utility supports a wide variety of options. You can
usually use the --help option to get a list of interesting options for a
particular configure script.</p>
<p>The only generic options you are likely to use are the --prefix and
--exec-prefix options. These options are used to specify the
installation directories.  </p>
<p>The directory named by the --prefix option will hold machine independent
files such as documentation, data and configuration files.</p>
<p>The directory named by the --exec-prefix option, (which is normally a
subdirectory of the --prefix directory), will hold machine dependent
files such as executables.</p>
<h2 id="72-downloading-source-code">7.2 Downloading source code</h2>
<p>For this example, we will download a piece of free software that
converts between different units of measurements.</p>
<p>First create a download directory </p>
<pre><code>mkdir download
</code></pre>
<p><a href="/Teaching/Unix/units-1.74.tar.gz">Download the software here</a> and save
it to your new download directory.</p>
<h2 id="73-extracting-the-source-code">7.3 Extracting the source code</h2>
<p>Go into your <strong>download</strong> directory and list the contents. </p>
<pre><code>cd download

ls -l
</code></pre>
<p>As you can see, the filename ends in tar.gz. The tar command turns
several files and directories into one single tar file. This is then
compressed using the gzip command (to create a tar.gz file).</p>
<p>First unzip the file using the gunzip command. This will create a .tar
file. </p>
<pre><code>gunzip units-1.74.tar.gz
</code></pre>
<p>Then extract the contents of the tar file.  </p>
<pre><code>tar -xvf units-1.74.tar
</code></pre>
<p>Again, list the contents of the <strong>download</strong> directory, then go to the
<strong>units-1.74</strong> sub-directory. </p>
<pre><code>cd units-1.74
</code></pre>
<h2 id="74-configuring-and-creating-the-makefile">7.4 Configuring and creating the Makefile</h2>
<p>The first thing to do is carefully read the <strong>README</strong> and <strong>INSTALL</strong>
text files (use the less command). These contain important information
on how to compile and run the software.</p>
<p>The units package uses the GNU configure system to compile the source
code. We will need to specify the installation directory, since the
default will be the main system area which you will not have write
permissions for. We need to create an install directory in your home
directory.  </p>
<pre><code>mkdir ~/units174
</code></pre>
<p>Then run the configure utility setting the installation path to this.  </p>
<pre><code>./configure --prefix=$HOME/units174
</code></pre>
<p>NOTE:</p>
<p>The <strong>$HOME</strong> variable is an example of an environment variable.
The value of <strong>$HOME</strong> is the path to your home directory. Just type
<code>echo $HOME</code></p>
<p>to show the contents of this variable. We will learn more about
environment variables in a later chapter.</p>
<p>If configure has run correctly, it will have created a Makefile with all
necessary options. You can view the Makefile if you wish (use the less
command), but do not edit the contents of this.</p>
<h2 id="75-building-the-package">7.5 Building the package</h2>
<p>Now you can go ahead and build the package by running the make command. </p>
<pre><code>make
</code></pre>
<p>After a minute or two (depending on the speed of the computer), the
executables will be created. You can check to see everything compiled
successfully by typing</p>
<pre><code>make check
</code></pre>
<p>If everything is okay, you can now install the package.  </p>
<pre><code>make install
</code></pre>
<p>This will install the files into the <strong>~/units174</strong> directory you
created earlier.</p>
<h2 id="76-running-the-software">7.6 Running the software</h2>
<p>You are now ready to run the software (assuming everything worked). </p>
<pre><code>cd ~/units174
</code></pre>
<p>If you list the contents of the units directory, you will see a number
of subdirectories.</p>
<hr />
<p>bin     The binary executables
  info    GNU info formatted documentation
  man     Man pages
  share   Shared data files</p>
<hr />
<p>To run the program, change to the <strong>bin</strong> directory and type </p>
<pre><code>./units
</code></pre>
<p>As an example, convert 6 feet to metres. </p>
<p>You have: 6 feet</p>
<p>You want: metres </p>
<ul>
<li>1.8288</li>
</ul>
<p>If you get the answer 1.8288, congratulations, it worked.</p>
<p>To view what units it can convert between, view the data file in the
share directory (the list is quite comprehensive).</p>
<p>To read the full documentation, change into the <strong>info</strong> directory and
type </p>
<pre><code>info --file=units.info
</code></pre>
<h2 id="77-stripping-unnecessary-code">7.7 Stripping unnecessary code</h2>
<p>When a piece of software is being developed, it is useful for the
programmer to include debugging information into the resulting
executable. This way, if there are problems encountered when running the
executable, the programmer can load the executable into a debugging
software package and track down any software bugs.</p>
<p>This is useful for the programmer, but unnecessary for the user. We can
assume that the package, once finished and available for download has
already been tested and debugged. However, when we compiled the software
above, debugging information was still compiled into the final
executable. Since it is unlikey that we are going to need this debugging
information, we can strip it out of the final executable. One of the
advantages of this is a much smaller executable, which should run
slightly faster.</p>
<p>What we are going to do is look at the before and after size of the
binary file. First change into the <strong>bin</strong> directory of the units
installation directory. </p>
<pre><code>cd ~/units174/bin

ls -l
</code></pre>
<p>As you can see, the file is over 100 kbytes in size. You can get more
information on the type of file by using the file command. </p>
<pre><code>file units
</code></pre>
<p>units: ELF 32-bit LSB executable, Intel 80386, version 1, dynamically
linked (uses shared libs), not stripped</p>
<p>To strip all the debug and line numbering information out of the binary
file, use the strip command </p>
<pre><code>strip units

ls -l
</code></pre>
<p>As you can see, the file is now 36 kbytes - a third of its original
size. Two thirds of the binary file was debug code !!!</p>
<p>Check the file information again. </p>
<pre><code>file units
</code></pre>
<p>units: ELF 32-bit LSB executable, Intel 80386, version 1, dynamically
linked (uses shared libs), stripped</p>
<p>HINT: You can use the make command to install pre-stripped copies of all
the binary files when you install the package.</p>
<p>Instead of typing make install, simply type make install-strip</p>
<p>M.Stonebank@surrey.ac.uk, © October 2001</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../unix8/" class="btn btn-neutral float-right" title="8. UNIX Tutorial Eight">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../unix6/" class="btn btn-neutral" title="6. UNIX Tutorial Six"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../unix6/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../unix8/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
      <script src="../../../search/main.js" defer></script>

</body>
</html>
